/* BASED OFF OF TOAST GRID BY DANEDAN 2015 (https://github.com/daneden/Toast) */
/* UPDATED TO USE FLEXBOX BY TOMCHAMBERLAINUK 2020 */


// VARIABLES FOR CUSTOMISATION
// Namespacing (class names)
$tg-grid-namespace: "grid" !default;
$tg-grid-column-namespace: "grid__column" !default;

// Column groups (max columns on single row)
$tg-column-groups: (1, 2, 3, 4, 8, 12) !default;

// Gutter width
$tg-gutter-width: 1rem !default;

// Breakpoints
$tg-breakpoint-med: 600px !default;
$tg-breakpoint-lrg: 1200px !default;

// Breakpoint namespacing (default is "...@600px+" or "...@1200px+" eg. "grid__column--1-of-4@600px+")
$tg-breakpoint-med-namespace: \@#{$tg-breakpoint-med}\+;
$tg-breakpoint-lrg-namespace: \@#{$tg-breakpoint-lrg}\+;





// DO NOT ALTER ANYTHING BELOW THIS POINT
// Predefined percentages (to reduce lines of code produced)
$tg-span-all: percentage(1/1);
$tg-one-half: percentage(1/2);
$tg-one-third: percentage(1/3);
$tg-two-thirds: percentage(2/3);
$tg-one-quarter: percentage(1/4);
$tg-two-quarters: percentage(2/4);
$tg-three-quarters : percentage(3/4);
// These @extends are repeated throughout media queries due to limitations in sass
%tg-bp0-span-all { width: calc(#{$tg-span-all} - #{$tg-gutter-width}) }
%tg-bp0-one-half { width: calc(#{$tg-one-half} - #{$tg-gutter-width}) }
%tg-bp0-one-third { width: calc(#{$tg-one-third} - #{$tg-gutter-width}) }
%tg-bp0-two-thirds { width: calc(#{$tg-two-thirds} - #{$tg-gutter-width}) }
%tg-bp0-one-quarter { width: calc(#{$tg-one-quarter} - #{$tg-gutter-width}) }
%tg-bp0-two-quarters { width: calc(#{$tg-two-quarters} - #{$tg-gutter-width}) }
%tg-bp0-three-quarters { width: calc(#{$tg-three-quarters} - #{$tg-gutter-width}) }

// BASIC PROPERTIES
// "Grid" properties
.#{$tg-grid-namespace} {
	display: flex;
	flex-wrap: wrap;
	margin-left: -$tg-gutter-width;
	margin-top: -$tg-gutter-width;
	width: calc(100% + #{$tg-gutter-width});
}
// "Column" properties
.#{$tg-grid-column-namespace} {
	margin-left: $tg-gutter-width;
	margin-top: $tg-gutter-width;
}

// SIZING PROPERTIES
// Mobile first
@each $group in $tg-column-groups {
	@for $i from 1 through $group {
		.#{$tg-grid-column-namespace}--#{$i}-of-#{$group} {
			@if percentage($i/$group) == percentage(1/1) {
				@extend %tg-bp0-span-all;
			} @else if percentage($i/$group) == percentage(1/2) {
				@extend %tg-bp0-one-half;
			} @else if percentage($i/$group) == percentage(1/3) {
				@extend %tg-bp0-one-third;
			} @else if percentage($i/$group) == percentage(2/3) {
				@extend %tg-bp0-two-thirds;
			} @else if percentage($i/$group) == percentage(1/4) {
				@extend %tg-bp0-one-quarter;
			} @else if percentage($i/$group) == percentage(2/4) {
				@extend %tg-bp0-two-quarters;
			} @else if percentage($i/$group) == percentage(3/4) {
				@extend %tg-bp0-three-quarters;
			} @else {
				$percentage: percentage($i/$group);
				width: calc(#{$percentage} - #{$tg-gutter-width});
			}
		}
	}
}

// Medium breakpoint
@media only screen and (min-width: $tg-breakpoint-med) {
	%tg-bp1-span-all { width: calc(#{$tg-span-all} - #{$tg-gutter-width}) }
	%tg-bp1-one-half { width: calc(#{$tg-one-half} - #{$tg-gutter-width}) }
	%tg-bp1-one-third { width: calc(#{$tg-one-third} - #{$tg-gutter-width}) }
	%tg-bp1-two-thirds { width: calc(#{$tg-two-thirds} - #{$tg-gutter-width}) }
	%tg-bp1-one-quarter { width: calc(#{$tg-one-quarter} - #{$tg-gutter-width}) }
	%tg-bp1-two-quarters { width: calc(#{$tg-two-quarters} - #{$tg-gutter-width}) }
	%tg-bp1-three-quarters { width: calc(#{$tg-three-quarters} - #{$tg-gutter-width}) }
	@each $group in $tg-column-groups {
		@for $i from 1 through $group {
			.#{$tg-grid-column-namespace}--#{$i}-of-#{$group}#{$tg-breakpoint-med-namespace} {
				@if percentage($i/$group) == percentage(1/1) {
					@extend %tg-bp1-span-all;
				} @else if percentage($i/$group) == percentage(1/2) {
					@extend %tg-bp1-one-half;
				} @else if percentage($i/$group) == percentage(1/3) {
					@extend %tg-bp1-one-third;
				} @else if percentage($i/$group) == percentage(2/3) {
					@extend %tg-bp1-two-thirds;
				} @else if percentage($i/$group) == percentage(1/4) {
					@extend %tg-bp1-one-quarter;
				} @else if percentage($i/$group) == percentage(2/4) {
					@extend %tg-bp1-two-quarters;
				} @else if percentage($i/$group) == percentage(3/4) {
					@extend %tg-bp1-three-quarters;
				} @else {
					$percentage: percentage($i/$group);
					width: calc(#{$percentage} - #{$tg-gutter-width});
				}
			}
		}
	}
}

// Large breakpoint
@media only screen and (min-width: $tg-breakpoint-lrg) {
	%tg-bp2-span-all { width: calc(#{$tg-span-all} - #{$tg-gutter-width}) }
	%tg-bp2-one-half { width: calc(#{$tg-one-half} - #{$tg-gutter-width}) }
	%tg-bp2-one-third { width: calc(#{$tg-one-third} - #{$tg-gutter-width}) }
	%tg-bp2-two-thirds { width: calc(#{$tg-two-thirds} - #{$tg-gutter-width}) }
	%tg-bp2-one-quarter { width: calc(#{$tg-one-quarter} - #{$tg-gutter-width}) }
	%tg-bp2-two-quarters { width: calc(#{$tg-two-quarters} - #{$tg-gutter-width}) }
	%tg-bp2-three-quarters { width: calc(#{$tg-three-quarters} - #{$tg-gutter-width}) }
	@each $group in $tg-column-groups {
		@for $i from 1 through $group {
			.#{$tg-grid-column-namespace}--#{$i}-of-#{$group}#{$tg-breakpoint-lrg-namespace} {
				@if percentage($i/$group) == percentage(1/1) {
					@extend %tg-bp2-span-all;
				} @else if percentage($i/$group) == percentage(1/2) {
					@extend %tg-bp2-one-half;
				} @else if percentage($i/$group) == percentage(1/3) {
					@extend %tg-bp2-one-third;
				} @else if percentage($i/$group) == percentage(2/3) {
					@extend %tg-bp2-two-thirds;
				} @else if percentage($i/$group) == percentage(1/4) {
					@extend %tg-bp2-one-quarter;
				} @else if percentage($i/$group) == percentage(2/4) {
					@extend %tg-bp2-two-quarters;
				} @else if percentage($i/$group) == percentage(3/4) {
					@extend %tg-bp2-three-quarters;
				} @else {
					$percentage: percentage($i/$group);
					width: calc(#{$percentage} - #{$tg-gutter-width});
				}
			}
		}
	}
}